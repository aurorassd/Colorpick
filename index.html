<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ï¼“è‰²æ··ãœèª¿è‰²ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
            background-color: #ffffff;
        }

        .slider-container input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #d1d5db;
            outline: none;
            transition: opacity .2s;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: 3px solid #ffffff;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        /* Custom thumb colors */
        .c-thumb::-webkit-slider-thumb {
            background: #00bcd4;
        }

        .m-thumb::-webkit-slider-thumb {
            background: #e91e63;
        }

        .y-thumb::-webkit-slider-thumb {
            background: #ffeb3b;
        }

        .k-thumb::-webkit-slider-thumb {
            background: #4b5563;
        }

        /* dark gray for K */
        .ratio-thumb::-webkit-slider-thumb {
            background: #6366f1;
        }

        #saturationSlider::-webkit-slider-thumb {
            background: #3b82f6;
        }

        #valueSlider::-webkit-slider-thumb {
            background: #10b981;
        }

        .shadow-custom {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>

<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-custom border border-gray-200">
        <p class="text-gray-600 mb-8">3ã¤ã®ãƒ™ãƒ¼ã‚¹è‰²ï¼ˆã‚«ãƒ©ãƒ¼A, B, Cï¼‰ã‚’ãã‚Œãã‚Œ**CMYK**ã§ä½œã‚Šã€ãã‚Œã‚‰ã‚’æŒ‡å®šã—ãŸå‰²åˆã§æ··ãœåˆã‚ã›ã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æœ€çµ‚çš„ãªè‰²ã‚’HSVã§èª¿æ•´ã§ãã¾ã™ã€‚
        </p>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- ã‚«ãƒ©ãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="lg:col-span-1 flex flex-col items-center justify-center space-y-4 order-last lg:order-first">
                <div id="colorDisplay"
                    class="w-full h-48 rounded-lg border-4 border-gray-200 transition-colors duration-200 shadow-xl">
                </div>
                <div class="bg-gray-100 p-3 rounded-lg w-full text-center">
                    <p class="text-sm font-medium text-gray-500">æœ€çµ‚HEXã‚³ãƒ¼ãƒ‰</p>
                    <div id="hexCode" class="text-2xl font-mono font-bold text-gray-800">#FFFFFF</div>
                </div>

                <!-- æ··ãœã‚‹å‰ã®è‰²ã‚µãƒ³ãƒ—ãƒ« -->
                <div class="mt-4 w-full">
                    <h3 class="text-sm font-semibold text-gray-700 mb-2">ğŸ¨ æ··ãœã‚‹å‰ã®è‰²</h3>
                    <div class="flex justify-between space-x-2">
                        <div id="colorA_base" class="w-1/3 h-12 rounded shadow border border-gray-300"></div>
                        <div id="colorB_base" class="w-1/3 h-12 rounded shadow border border-gray-300"></div>
                        <div id="colorC_base" class="w-1/3 h-12 rounded shadow border border-gray-300"></div>
                    </div>
                </div>
            </div>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ -->
            <div class="lg:col-span-3 space-y-8">

                <!-- 1. ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ¼ã®å®šç¾© -->
                <h2 class="text-xl font-semibold text-gray-700 pb-1 border-b">1. 3ã¤ã®ãƒ™ãƒ¼ã‚¹è‰²ï¼ˆA, B, Cï¼‰ã®å®šç¾© (CMYKé…åˆ)</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                    <!-- ã‚«ãƒ©ãƒ¼ A -->
                    <div class="p-4 bg-blue-50/50 rounded-lg border border-blue-200 space-y-3">
                        <h3 class="font-bold text-blue-800">ã‚«ãƒ©ãƒ¼ A</h3>
                        <div class="slider-container">
                            <label for="c1Slider" class="text-xs font-medium text-gray-700 flex justify-between">C:
                                <span id="c1Value" class="font-mono text-cyan-600">0</span>%</label>
                            <input type="range" id="c1Slider" min="0" max="100" value="0" step="5"
                                class="c-thumb accent-cyan-500">
                        </div>
                        <div class="slider-container">
                            <label for="m1Slider" class="text-xs font-medium text-gray-700 flex justify-between">M:
                                <span id="m1Value" class="font-mono text-pink-600">0</span>%</label>
                            <input type="range" id="m1Slider" min="0" max="100" value="0" step="5"
                                class="m-thumb accent-pink-500">
                        </div>
                        <div class="slider-container">
                            <label for="y1Slider" class="text-xs font-medium text-gray-700 flex justify-between">Y:
                                <span id="y1Value" class="font-mono text-yellow-600">0</span>%</label>
                            <input type="range" id="y1Slider" min="0" max="100" value="0" step="5"
                                class="y-thumb accent-yellow-500">
                        </div>
                        <div class="slider-container">
                            <label for="k1Slider" class="text-xs font-medium text-gray-700 flex justify-between">K:
                                <span id="k1Value" class="font-mono text-gray-800">0</span>%</label>
                            <input type="range" id="k1Slider" min="0" max="100" value="0" step="5"
                                class="k-thumb accent-gray-700">
                        </div>
                    </div>

                    <!-- ã‚«ãƒ©ãƒ¼ B -->
                    <div class="p-4 bg-green-50/50 rounded-lg border border-green-200 space-y-3">
                        <h3 class="font-bold text-green-800">ã‚«ãƒ©ãƒ¼ B</h3>
                        <div class="slider-container">
                            <label for="c2Slider" class="text-xs font-medium text-gray-700 flex justify-between">C:
                                <span id="c2Value" class="font-mono text-cyan-600">0</span>%</label>
                            <input type="range" id="c2Slider" min="0" max="100" value="0" step="5"
                                class="c-thumb accent-cyan-500">
                        </div>
                        <div class="slider-container">
                            <label for="m2Slider" class="text-xs font-medium text-gray-700 flex justify-between">M:
                                <span id="m2Value" class="font-mono text-pink-600">0</span>%</label>
                            <input type="range" id="m2Slider" min="0" max="100" value="0" step="5"
                                class="m-thumb accent-pink-500">
                        </div>
                        <div class="slider-container">
                            <label for="y2Slider" class="text-xs font-medium text-gray-700 flex justify-between">Y:
                                <span id="y2Value" class="font-mono text-yellow-600">0</span>%</label>
                            <input type="range" id="y2Slider" min="0" max="100" value="0" step="5"
                                class="y-thumb accent-yellow-500">
                        </div>
                        <div class="slider-container">
                            <label for="k2Slider" class="text-xs font-medium text-gray-700 flex justify-between">K:
                                <span id="k2Value" class="font-mono text-gray-800">0</span>%</label>
                            <input type="range" id="k2Slider" min="0" max="100" value="0" step="5"
                                class="k-thumb accent-gray-700">
                        </div>
                    </div>

                    <!-- ã‚«ãƒ©ãƒ¼ C -->
                    <div class="p-4 bg-pink-50/50 rounded-lg border border-pink-200 space-y-3">
                        <h3 class="font-bold text-pink-800">ã‚«ãƒ©ãƒ¼ C</h3>
                        <div class="slider-container">
                            <label for="c3Slider" class="text-xs font-medium text-gray-700 flex justify-between">C:
                                <span id="c3Value" class="font-mono text-cyan-600">0</span>%</label>
                            <input type="range" id="c3Slider" min="0" max="100" value="0" step="5"
                                class="c-thumb accent-cyan-500">
                        </div>
                        <div class="slider-container">
                            <label for="m3Slider" class="text-xs font-medium text-gray-700 flex justify-between">M:
                                <span id="m3Value" class="font-mono text-pink-600">0</span>%</label>
                            <input type="range" id="m3Slider" min="0" max="100" value="0" step="5"
                                class="m-thumb accent-pink-500">
                        </div>
                        <div class="slider-container">
                            <label for="y3Slider" class="text-xs font-medium text-gray-700 flex justify-between">Y:
                                <span id="y3Value" class="font-mono text-yellow-600">0</span>%</label>
                            <input type="range" id="y3Slider" min="0" max="100" value="0" step="5"
                                class="y-thumb accent-yellow-500">
                        </div>
                        <div class="slider-container">
                            <label for="k3Slider" class="text-xs font-medium text-gray-700 flex justify-between">K:
                                <span id="k3Value" class="font-mono text-gray-800">0</span>%</label>
                            <input type="range" id="k3Slider" min="0" max="100" value="0" step="5"
                                class="k-thumb accent-gray-700">
                        </div>
                    </div>
                </div>

                <!-- 2. 3è‰²ã®æ··åˆæ¯”ç‡ -->
                <h2 class="text-xl font-semibold text-gray-700 pt-4 pb-1 border-b">2. ãƒ™ãƒ¼ã‚¹è‰²ã®æ··åˆæ¯”ç‡ (åŠ æ³•æ··è‰²ãƒ»RGB)</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                    <div class="slider-container">
                        <label for="ratio1Slider" class="text-sm font-medium text-gray-700 flex justify-between">
                            <span>ğŸ§ª æ··åˆæ¯”ç‡ A:</span>
                            <span id="ratio1Value" class="font-mono text-indigo-600">0</span>%
                        </label>
                        <input type="range" id="ratio1Slider" min="0" max="100" value="0" step="5"
                            class="ratio-thumb accent-indigo-500">
                    </div>

                    <div class="slider-container">
                        <label for="ratio2Slider" class="text-sm font-medium text-gray-700 flex justify-between">
                            <span>ğŸ§ª æ··åˆæ¯”ç‡ B:</span>
                            <span id="ratio2Value" class="font-mono text-indigo-600">0</span>%
                        </label>
                        <input type="range" id="ratio2Slider" min="0" max="100" value="0" step="5"
                            class="ratio-thumb accent-indigo-500">
                    </div>

                    <div class="slider-container">
                        <label for="ratio3Slider" class="text-sm font-medium text-gray-700 flex justify-between">
                            <span>ğŸ§ª æ··åˆæ¯”ç‡ C:</span>
                            <span id="ratio3Value" class="font-mono text-indigo-600">0</span>%
                        </label>
                        <input type="range" id="ratio3Slider" min="0" max="100" value="0" step="5"
                            class="ratio-thumb accent-indigo-500">
                    </div>

                </div>

                <!-- 3. æœ€çµ‚çš„ãªå½©åº¦ã¨æ˜åº¦ã®èª¿æ•´ -->
                <h2 class="text-xl font-semibold text-gray-700 pt-4 pb-1 border-b">3. æœ€çµ‚è‰²ã®èª¿æ•´ (HSV)</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="slider-container">
                        <label for="saturationSlider" class="text-sm font-medium text-gray-700 flex justify-between">
                            <span>ğŸŒˆ å½©åº¦ (S):</span>
                            <span id="saturationValue" class="font-mono text-blue-600">100</span>%
                        </label>
                        <input type="range" id="saturationSlider" min="0" max="100" value="100" step="5"
                            class="accent-blue-500">
                    </div>

                    <div class="slider-container">
                        <label for="valueSlider" class="text-sm font-medium text-gray-700 flex justify-between">
                            <span>ğŸ’¡ æ˜åº¦ (V/æ˜ã‚‹ã•):</span>
                            <span id="valueValue" class="font-mono text-green-600">100</span>%
                        </label>
                        <input type="range" id="valueSlider" min="0" max="100" value="100" step="5"
                            class="accent-green-500">
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // DOMè¦ç´ ã®å–å¾—
        const $ = (id) => document.getElementById(id);

        // CMYKã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ (3ã‚»ãƒƒãƒˆ)
        const c1Slider = $('c1Slider'), m1Slider = $('m1Slider'), y1Slider = $('y1Slider'), k1Slider = $('k1Slider');
        const c2Slider = $('c2Slider'), m2Slider = $('m2Slider'), y2Slider = $('y2Slider'), k2Slider = $('k2Slider');
        const c3Slider = $('c3Slider'), m3Slider = $('m3Slider'), y3Slider = $('y3Slider'), k3Slider = $('k3Slider');

        // æ··åˆæ¯”ç‡ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const ratio1Slider = $('ratio1Slider'), ratio2Slider = $('ratio2Slider'), ratio3Slider = $('ratio3Slider');

        // æœ€çµ‚èª¿æ•´ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
        const saturationSlider = $('saturationSlider');
        const valueSlider = $('valueSlider');

        // è¡¨ç¤ºè¦ç´ 
        const colorDisplay = $('colorDisplay');
        const hexCode = $('hexCode');
        const colorABase = $('colorA_base');
        const colorBBase = $('colorB_base');
        const colorCBase = $('colorC_base');

        /**
         * RGBã‹ã‚‰HSVã¸å¤‰æ›ã™ã‚‹é–¢æ•° (0-255 -> H:0-360, S:0-1, V:0-1)
         */
        function rgbToHsv(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            let max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, v = max;

            let d = max - min;
            s = max === 0 ? 0 : d / max;

            if (max === min) {
                h = 0; // ç„¡å½©è‰²
            } else {
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h: h * 360, s: s, v: v }; // H: 0-360, S: 0-1, V: 0-1
        }

        /**
         * HSVã‹ã‚‰RGBã¸å¤‰æ›ã™ã‚‹é–¢æ•° (H:0-360, S:0-1, V:0-1 -> 0-255)
         */
        function hsvToRgb(h, s, v) {
            let r, g, b;
            let i = Math.floor(h / 60);
            let f = h / 60 - i;
            let p = v * (1 - s);
            let q = v * (1 - f * s);
            let t = v * (1 - (1 - f) * s);

            switch (i % 6) {
                case 0: r = v, g = t, b = p; break;
                case 1: r = q, g = v, b = p; break;
                case 2: r = p, g = v, b = t; break;
                case 3: r = p, g = q, b = v; break;
                case 4: r = t, g = p, b = v; break;
                case 5: r = v, g = p, b = q; break;
            }

            return {
                r: Math.min(255, Math.max(0, Math.round(r * 255))),
                g: Math.min(255, Math.max(0, Math.round(g * 255))),
                b: Math.min(255, Math.max(0, Math.round(b * 255)))
            };
        }

        /**
         * RGBå€¤ã‚’16é€²æ•°ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã™ã‚‹é–¢æ•°
         */
        function rgbToHex(r, g, b) {
            const toHex = (c) => {
                const hex = c.toString(16);
                return hex.length === 1 ? "0" + hex : hex;
            };
            return "#" + toHex(r) + toHex(g) + toHex(b);
        }

        /**
         * CMYKå€¤ (0-100) ã‹ã‚‰ RGBå€¤ (0-255) ã‚’ç®—å‡ºã™ã‚‹é–¢æ•° (æ¸›æ³•æ··è‰²ãƒ¢ãƒ‡ãƒ«)
         */
        function cmykToRgb(c, m, y, k) {
            // 0-1ã«æ­£è¦åŒ–
            const C_n = c / 100;
            const M_n = m / 100;
            const Y_n = y / 100;
            const K_n = k / 100;

            // CMYK to RGB (0-1) formula: 1 - min(1, C * (1 - K) + K)
            const R_n = 1 - Math.min(1, C_n * (1 - K_n) + K_n);
            const G_n = 1 - Math.min(1, M_n * (1 - K_n) + K_n);
            const B_n = 1 - Math.min(1, Y_n * (1 - K_n) + K_n);

            return {
                r: Math.round(R_n * 255),
                g: Math.round(G_n * 255),
                b: Math.round(B_n * 255)
            };
        }

        // å…¨ã¦ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å¤‰æ›´ã‚’å‡¦ç†ã™ã‚‹ãƒ¡ã‚¤ãƒ³é–¢æ•°
        function updateColor() {
            // 1. ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼å€¤ã®å–å¾—
            const C1 = parseInt(c1Slider.value), M1 = parseInt(m1Slider.value), Y1 = parseInt(y1Slider.value), K1 = parseInt(k1Slider.value);
            const C2 = parseInt(c2Slider.value), M2 = parseInt(m2Slider.value), Y2 = parseInt(y2Slider.value), K2 = parseInt(k2Slider.value);
            const C3 = parseInt(c3Slider.value), M3 = parseInt(m3Slider.value), Y3 = parseInt(y3Slider.value), K3 = parseInt(k3Slider.value);

            const R1 = parseInt(ratio1Slider.value);
            const R2 = parseInt(ratio2Slider.value);
            const R3 = parseInt(ratio3Slider.value);

            const S_final = parseInt(saturationSlider.value) / 100; // 0-1
            const V_final = parseInt(valueSlider.value) / 100; // 0-1

            // ç”»é¢ä¸Šã®è¡¨ç¤ºå€¤ã‚’æ›´æ–°
            $('c1Value').textContent = C1; $('m1Value').textContent = M1; $('y1Value').textContent = Y1; $('k1Value').textContent = K1;
            $('c2Value').textContent = C2; $('m2Value').textContent = M2; $('y2Value').textContent = Y2; $('k2Value').textContent = K2;
            $('c3Value').textContent = C3; $('m3Value').textContent = M3; $('y3Value').textContent = Y3; $('k3Value').textContent = K3;

            $('ratio1Value').textContent = R1;
            $('ratio2Value').textContent = R2;
            $('ratio3Value').textContent = R3;
            $('saturationValue').textContent = S_final * 100;
            $('valueValue').textContent = V_final * 100;


            // 2. CMYKã®èª¿è‰²ï¼ˆ3ã¤ã®ãƒ™ãƒ¼ã‚¹è‰²ã‚’RGBã§å–å¾—ï¼‰
            const rgbA = cmykToRgb(C1, M1, Y1, K1);
            const rgbB = cmykToRgb(C2, M2, Y2, K2);
            const rgbC = cmykToRgb(C3, M3, Y3, K3);

            // æ··ãœã‚‹å‰ã®è‰²ã‚µãƒ³ãƒ—ãƒ«ã‚’æ›´æ–°
            colorABase.style.backgroundColor = rgbToHex(rgbA.r, rgbA.g, rgbA.b);
            colorBBase.style.backgroundColor = rgbToHex(rgbB.r, rgbB.g, rgbB.b);
            colorCBase.style.backgroundColor = rgbToHex(rgbC.r, rgbC.g, rgbC.b);

            // 3. 3è‰²ã®æ··åˆï¼ˆåŠ æ³•æ··è‰²ãƒ»RGBã§ã®å¹³å‡ï¼‰
            const totalRatio = R1 + R2 + R3;
            let R_mixed, G_mixed, B_mixed;

            if (totalRatio === 0) {
                // æ¯”ç‡ãŒå…¨ã¦0ã®å ´åˆã¯ç™½ï¼ˆç„¡è‰²ï¼‰
                R_mixed = 255;
                G_mixed = 255;
                B_mixed = 255;
            } else {
                // é‡ã¿ä»˜ãå¹³å‡ã§è‰²ã‚’æ··ãœã‚‹
                R_mixed = (rgbA.r * R1 + rgbB.r * R2 + rgbC.r * R3) / totalRatio;
                G_mixed = (rgbA.g * R1 + rgbB.g * R2 + rgbC.g * R3) / totalRatio;
                B_mixed = (rgbA.b * R1 + rgbB.b * R2 + rgbC.b * R3) / totalRatio;
            }

            // 4. æ··åˆè‰²ã‚’HSVã«å¤‰æ›ã—ã€æœ€çµ‚S/Vã‚’é©ç”¨
            const hsvMixed = rgbToHsv(R_mixed, G_mixed, B_mixed);
            let H_final = hsvMixed.h;

            // æ··åˆè‰²ãŒå®Œå…¨ã«ç„¡å½©è‰²ï¼ˆç™½é»’ã‚°ãƒ¬ãƒ¼ï¼‰ã®å ´åˆã€Hueã¯ç„¡æ„å‘³ãªã®ã§0ã«ãƒªã‚»ãƒƒãƒˆ
            if (hsvMixed.s < 0.01) {
                H_final = 0;
            }

            // æœ€çµ‚HSVã‹ã‚‰RGBã‚’è¨ˆç®—
            const rgbFinal = hsvToRgb(H_final, S_final, V_final);

            // 5. è¡¨ç¤ºã®æ›´æ–°
            const hexFinal = rgbToHex(rgbFinal.r, rgbFinal.g, rgbFinal.b);
            colorDisplay.style.backgroundColor = hexFinal;
            hexCode.textContent = hexFinal;

            // èƒŒæ™¯è‰²ã«å¿œã˜ã¦HEXã‚³ãƒ¼ãƒ‰ã®æ–‡å­—è‰²ã‚’èª¿æ•´ (è¦–èªæ€§ç¢ºä¿ã®ãŸã‚)
            const luminance = (0.299 * rgbFinal.r + 0.587 * rgbFinal.g + 0.114 * rgbFinal.b) / 255;
            hexCode.classList.toggle('text-white', luminance < 0.5);
            hexCode.classList.toggle('text-gray-800', luminance >= 0.5);
        }

        // åˆæœŸè¨­å®šã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ²
        function init() {
            // ã™ã¹ã¦ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼è¦ç´ ã‚’å–å¾—
            const sliders = document.querySelectorAll('input[type="range"]');
            sliders.forEach(slider => {
                slider.addEventListener('input', updateColor);
            });

            // åˆæœŸå€¤ã¨ã—ã¦ã€ã‚«ãƒ©ãƒ¼Aã¨æ¯”ç‡Aã‚’å°‘ã—è¨­å®š
            c1Slider.value = 80;
            m1Slider.value = 30;
            ratio1Slider.value = 50;

            // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ä¸€åº¦å®Ÿè¡Œ
            updateColor();
        }

        window.onload = init;
    </script>
</body>

</html>